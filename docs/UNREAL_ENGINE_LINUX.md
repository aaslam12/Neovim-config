# Unreal Engine Development on Linux with Neovim

This configuration replaces UBT.nvim (Windows-only) with **overseer.nvim**, a platform-agnostic task runner that works perfectly for Unreal Engine development on Linux.

## Quick Start

### Available Keybindings

| Key | Command | Description |
|-----|---------|-------------|
| `<leader>nb` | `:OverseerRun` | Show task picker and run selected task |
| `<leader>nB` | `:OverseerToggle` | Toggle task list panel |
| `<leader>nr` | `:OverseerRun UE_Build` | Quick build |
| `<leader>nc` | `:OverseerRun UE_Clean` | Clean build |
| `<leader>nh` | `:OverseerRun UE_GenerateProjectFiles` | Regenerate project files |
| `<leader>nl` | `:OverseerRun UE_Editor` | Launch UE editor |
| `<leader>nd` | `:OverseerRun UE_Diagnostics` | Show build output |
| `<leader>no` | `:OverseerOpen` | Open task list panel |
| `<leader>nq` | `:OverseerClose` | Close task list panel |

### Basic Usage

1. **Run a task**: Press `<leader>nb` → select task → press Enter
2. **View output**: Press `<leader>nB` to toggle the task output panel
3. **Stop a task**: Press `q` in the task panel or `Ctrl+C`

## Configuring Custom UE Tasks

Tasks are defined in `lua/configs/overseer-tasks.lua`. Each task is a Lua table with:

```lua
{
    name = "UE_Build",                    -- Unique task name
    desc = "Build Unreal Engine project", -- Description shown in picker
    builder = function()                  -- Function that returns task config
        return {
            cmd = "make",                 -- Command to run
            args = { "-j$(nproc)" },      -- Arguments
            cwd = vim.fn.getcwd(),        -- Working directory
            components = {                -- Overseer components
                "on_complete_notify",     -- Show notification when done
                "on_exit_set_status",     -- Set exit status
            },
        }
    end,
    tags = { "unreal", "build" },         -- Tags for filtering
}
```

### Common Linux UE Build Commands

Replace the commands in `overseer-tasks.lua` with your actual UE build workflow:

```bash
# Using make (if you have a Makefile)
make -j$(nproc)
make clean

# Using ./Build.sh (if it exists)
./Build.sh -build
./Build.sh -editor

# Using Engine binaries directly
~/UnrealEngine/Engine/Build/BatchFiles/Linux/Build.sh MyProject Linux Development

# Generate project files
./GenerateProjectFiles.sh
```

## Adding New Tasks

Edit `lua/configs/overseer-tasks.lua` and add a new task:

```lua
{
    name = "UE_CustomBuild",
    desc = "Custom build task",
    builder = function()
        return {
            cmd = "your-build-command",
            args = { "arg1", "arg2" },
            cwd = vim.fn.getcwd(),
            components = { "on_complete_notify", "on_exit_set_status" },
        }
    end,
    tags = { "unreal", "custom" },
}
```

Then reload Neovim and the task will appear in the picker: `<leader>nb`

## Filtering by Tags

List all tasks with a specific tag:

```vim
:OverseerListTags
```

Run tasks by tag:

```vim
:OverseerRunCmd OverseerQuickAction! tag:unreal
```

## Advanced: Task Templates

For more complex builds, use template variables:

```lua
builder = function()
    return {
        cmd = "env",
        args = {
            "UE_BUILD_TARGET=" .. uproject_name,
            "./build.sh",
        },
        cwd = vim.fn.getcwd(),
    }
end,
```

## Troubleshooting

### Task runs but command not found
- Ensure the command exists in your PATH
- Check full path: `:echo system('which command_name')`
- Add to task: `cmd = "/full/path/to/command"`

### No .uproject file found
- Navigate to your UE project root directory
- The root should contain the `.uproject` file
- Verify: `:pwd` and `:!ls *.uproject`

### Output not showing
- Press `<leader>nB` to toggle the output panel
- Or use `<leader>no` to explicitly open it

### Want to use standard build system?
- You can still use `<leader>mm` (`:make`) which runs `python3 build.py`
- This is configured independently of Overseer

## Integration with LSP

If your UE project uses `compile_commands.json` (generated by tasks):

1. Create a task that runs `bear make` to generate the database
2. Your clangd LSP will automatically find and use it
3. Code completion and diagnostics will work for your UE code

## References

- [overseer.nvim docs](https://github.com/stevearc/overseer.nvim)
- [Unreal Engine Linux guide](https://docs.unrealengine.com/5.0/en-US/linux-development-requirements-for-unreal-engine/)
